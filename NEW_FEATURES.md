# ‚öôÔ∏è –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ + SPOT/FUTURES

## üì∞ 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π

### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

‚úÖ **–ú–æ–¥—É–ª—å `news_scheduler.py`** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å dashboard** - –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª** - —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è news scheduler
2. **–ö–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
   - –ó–∞–ø—Ä–æ—Å –∫ CryptoPanic API
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10-20 –Ω–æ–≤–æ—Å—Ç–µ–π
   - –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ FinBERT
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ dashboard

3. **–ù–æ–≤–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤–æ –≤–∫–ª–∞–¥–∫–µ "–ù–æ–≤–æ—Å—Ç–∏"

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

–í —Ñ–∞–π–ª–µ `.env`:
```env
NEWS_UPDATE_INTERVAL_MINUTES=15  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 15-30
```

**–õ–∏–º–∏—Ç—ã CryptoPanic (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ):**
- 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
- 15 –º–∏–Ω—É—Ç = 96 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å ‚úÖ
- 30 –º–∏–Ω—É—Ç = 48 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å ‚úÖ (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)

### –õ–æ–≥–∏:

Scheduler —Å–æ–∑–¥–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:
```
[12:00:00] [NEWS] üì∞ Fetching news...
[12:00:05] [NEWS] Fetched 15 news items for BTC
[12:00:10] [NEWS] üì∞ –ù–æ–≤–æ—Å—Ç—å: Bitcoin reaches new ATH... (sentiment: 0.85 üòä)
[12:00:15] [NEWS] üìä Analysis complete: 15 items | Avg sentiment: 0.42 | üòä 8 | üòê 5 | ‚òπÔ∏è 2
[12:00:16] [NEWS] ‚úÖ Updated 15 news items
[12:00:17] [ML] üìä Sentiment –æ–±–Ω–æ–≤–ª–µ–Ω: 0.42 (–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π)
```

### API –º–µ—Ç–æ–¥—ã:

–ù–æ–≤—ã–π endpoint:
```
GET /api/news
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "news": [
    {
      "symbol": "BTC",
      "title": "Bitcoin reaches new high",
      "source": "CryptoPanic",
      "sentiment": 0.85,
      "category": "positive",
      "published_at": "2025-12-01T12:00:00"
    }
  ],
  "sentiment_history": [
    {
      "timestamp": "2025-12-01T12:00:00",
      "score": 0.42
    }
  ]
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

**–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```python
from src.sentiment.news_scheduler import NewsScheduler
scheduler.force_update()  # –û–±–Ω–æ–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```python
scheduler.is_running()  # True/False
scheduler.get_last_update()  # datetime –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

---

## üíπ 2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SPOT –∏ FUTURES

### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

‚úÖ **–ú–æ–¥—É–ª—å `market_type.py`** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–º —Ä—ã–Ω–∫–∞
‚úÖ **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞** - SPOT –∏–ª–∏ FUTURES
‚úÖ **–†–∞—Å—á–µ—Ç P&L** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä—ã–Ω–∫–æ–≤
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ leverage** –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ dashboard** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

–í —Ñ–∞–π–ª–µ `.env`:
```env
MARKET_TYPE=spot     # spot, futures, linear, inverse
LEVERAGE=1           # –ü–ª–µ—á–æ –¥–ª—è futures (1-100x)
```

### –¢–∏–ø—ã —Ä—ã–Ω–∫–æ–≤:

#### 1. SPOT (—Å–ø–æ—Ç)
```env
MARKET_TYPE=spot
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–∫—É–ø–∫–∞/–ø—Ä–æ–¥–∞–∂–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–∞
- –ë–µ–∑ –ø–ª–µ—á–∞ (leverage = 1)
- –¢–æ–ª—å–∫–æ LONG –ø–æ–∑–∏—Ü–∏–∏
- –§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞
- –ú–µ–Ω—å—à–µ —Ä–∏—Å–∫

**–ü—Ä–∏–º–µ—Ä:**
–ö—É–ø–∏–ª–∏ 0.1 BTC –∑–∞ $9,000
–¶–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –¥–æ $9,500
–ü—Ä–∏–±—ã–ª—å: (9500 - 9000) * 0.1 = $50

#### 2. LINEAR FUTURES (–ª–∏–Ω–µ–π–Ω—ã–µ —Ñ—å—é—á–µ—Ä—Å—ã)
```env
MARKET_TYPE=futures  # –∏–ª–∏ linear
LEVERAGE=3           # –ü–ª–µ—á–æ 3x
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- USDT-–º–∞—Ä–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–µ—á–∞ –¥–æ 100x
- LONG –∏ SHORT –ø–æ–∑–∏—Ü–∏–∏
- Perpetual (–±–µ—Å—Å—Ä–æ—á–Ω—ã–µ) –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –†–∞—Å—á–µ—Ç P&L –≤ USDT

**–ü—Ä–∏–º–µ—Ä —Å –ø–ª–µ—á–æ–º 3x:**
–î–µ–ø–æ–∑–∏—Ç: $1,000
–û—Ç–∫—Ä—ã–ª–∏: $3,000 (0.3 BTC @ $10,000)
–¶–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –¥–æ $11,000
–ü—Ä–∏–±—ã–ª—å: (11000 - 10000) * 0.3 = $300
ROI: 30% (–Ω–∞ –¥–µ–ø–æ–∑–∏—Ç $1,000)

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:**
- –ü–ª–µ—á–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∏ –ø—Ä–∏–±—ã–ª—å, –∏ —É–±—ã—Ç–∫–∏
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –Ω–∞ 33% —Å –ø–ª–µ—á–æ–º 3x = –ª–∏–∫–≤–∏–¥–∞—Ü–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∏–Ω–∞—Ç—å —Å 1-3x

#### 3. INVERSE FUTURES (–æ–±—Ä–∞—Ç–Ω—ã–µ —Ñ—å—é—á–µ—Ä—Å—ã)
```env
MARKET_TYPE=inverse
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Coin-–º–∞—Ä–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (BTC, ETH)
- P&L –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ

### Dashboard –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ dashboard –ø–æ—è–≤–∏—Ç—Å—è:

**SPOT —Ä–µ–∂–∏–º:**
```
–†—ã–Ω–æ–∫: SPOT
```

**FUTURES —Ä–µ–∂–∏–º:**
```
–†—ã–Ω–æ–∫: LINEAR FUTURES
–ü–ª–µ—á–æ: 3x
```

### API –∏–∑–º–µ–Ω–µ–Ω–∏—è:

Endpoint `/api/config` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "market_type": "spot",
  "is_futures": false,
  "leverage": {
    "available": false,
    "max_leverage": 1,
    "current_leverage": 1
  }
}
```

–î–ª—è futures:
```json
{
  "market_type": "linear",
  "is_futures": true,
  "leverage": {
    "available": true,
    "max_leverage": 100,
    "current_leverage": 3,
    "recommended": 3,
    "warning": "Higher leverage = higher risk!"
  }
}
```

### –†–∞—Å—á–µ—Ç P&L:

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç P&L –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Ä—ã–Ω–∫–∞:

```python
from src.trading.market_type import get_market_manager

manager = get_market_manager()

# LONG –ø–æ–∑–∏—Ü–∏—è
pnl = manager.calculate_pnl(
    entry_price=90000,
    current_price=95000,
    size=0.1,
    side='long'
)
# SPOT: $500
# LINEAR with 3x: $500 (–Ω–æ —Å –º–µ–Ω—å—à–∏–º –∫–∞–ø–∏—Ç–∞–ª–æ–º)

# SHORT –ø–æ–∑–∏—Ü–∏—è (—Ç–æ–ª—å–∫–æ futures)
pnl = manager.calculate_pnl(
    entry_price=95000,
    current_price=90000,
    size=0.1,
    side='short'
)
# –ü—Ä–∏–±—ã–ª—å: $500
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è SPOT —Ç–æ—Ä–≥–æ–≤–ª–∏ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ):

1. –í `.env`:
```env
MARKET_TYPE=spot
RISK_PER_TRADE=0.01  # 1% –Ω–∞ —Å–¥–µ–ª–∫—É
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
3. News –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
4. –¢–æ—Ä–≥–æ–≤–ª—è —Ç–æ–ª—å–∫–æ LONG

### –î–ª—è FUTURES —Ç–æ—Ä–≥–æ–≤–ª–∏ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ):

1. –í `.env`:
```env
MARKET_TYPE=futures
LEVERAGE=3  # –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∞–ª–æ–≥–æ!
RISK_PER_TRADE=0.005  # 0.5% —Å —É—á–µ—Ç–æ–º –ø–ª–µ—á–∞
```

2. **‚ö†Ô∏è –í–∞–∂–Ω–æ:**
   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ testnet –º–∏–Ω–∏–º—É–º 2 –Ω–µ–¥–µ–ª–∏
   - –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –ø–ª–µ—á–∞ 1-3x
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ > 5x –±–µ–∑ –æ–ø—ã—Ç–∞
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ margin level

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
4. –ú–æ–∂–Ω–æ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å LONG –∏ SHORT

---

## üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### NEWS_UPDATE_INTERVAL:

| –ò–Ω—Ç–µ—Ä–≤–∞–ª | –ó–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|---------------|--------------|
| 10 –º–∏–Ω | 144 | ‚ùå –ü—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç |
| 15 –º–∏–Ω | 96 | ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ |
| 30 –º–∏–Ω | 48 | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ |
| 60 –º–∏–Ω | 24 | ‚ö†Ô∏è –†–µ–¥–∫–æ |

### LEVERAGE:

| –ü–ª–µ—á–æ | –†–∏—Å–∫ | –î–ª—è –∫–æ–≥–æ |
|-------|------|----------|
| 1x | –ù–∏–∑–∫–∏–π | –ù–∞—á–∏–Ω–∞—é—â–∏–µ |
| 2-3x | –°—Ä–µ–¥–Ω–∏–π | –° –æ–ø—ã—Ç–æ–º |
| 5-10x | –í—ã—Å–æ–∫–∏–π | –ü—Ä–æ—Ñ–∏ |
| 10x+ | –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π | ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |

### MARKET_TYPE:

| –¢–∏–ø | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã | –î–ª—è –∫–æ–≥–æ |
|-----|-------|--------|----------|
| SPOT | –ë–µ–∑–æ–ø–∞—Å–Ω–æ, —Ñ–∏–∑. –∞–∫—Ç–∏–≤ | –¢–æ–ª—å–∫–æ LONG, –º–µ–¥–ª–µ–Ω–Ω–æ | –ù–∞—á–∏–Ω–∞—é—â–∏–µ, –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ |
| LINEAR | SHORT, –ø–ª–µ—á–æ, –≥–∏–±–∫–æ—Å—Ç—å | –õ–∏–∫–≤–∏–¥–∞—Ü–∏—è, –∫–æ–º–∏—Å—Å–∏–∏ | –û–ø—ã—Ç–Ω—ã–µ —Ç—Ä–µ–π–¥–µ—Ä—ã |
| INVERSE | Hedge –≤ –∫—Ä–∏–ø—Ç–µ | –°–ª–æ–∂–Ω—ã–π —Ä–∞—Å—á–µ—Ç | –ü—Ä–æ—Ñ–∏ |

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ VPS

```bash
cd /opt/aicryptobot

# 1. –û–±–Ω–æ–≤–∏—Ç—å .env
nano .env
# –î–æ–±–∞–≤–∏—Ç—å:
# NEWS_UPDATE_INTERVAL_MINUTES=15
# MARKET_TYPE=spot
# LEVERAGE=1

# 2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
bash deploy_from_git.sh

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f logs/dashboard.log

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# [NEWS] ‚úÖ Scheduler started: 15 minute interval
# [MARKET] Type: SPOT
```

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

1. **src/sentiment/news_scheduler.py** - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
2. **src/trading/market_type.py** - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
3. **src/web/app.py** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ news scheduler –∏ market type
4. **templates/dashboard.html** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ market type
5. **static/js/dashboard.js** - –æ–±–Ω–æ–≤–ª–µ–Ω config display
6. **.env** - –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å news scheduler:

```bash
# –ù–∞ Windows
cd d:\Projects\AiCryptoBot
python -c "from src.sentiment.news_scheduler import NewsScheduler; print('‚úÖ Import OK')"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
python src/sentiment/news_scheduler.py
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å market type:

```bash
python -c "from src.trading.market_type import get_market_manager; m = get_market_manager(); print(m.get_market_info())"
```

---

–û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
